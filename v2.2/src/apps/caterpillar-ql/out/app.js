"use strict";

var _web = _interopRequireDefault(require("web3"));

var _mongoose = _interopRequireDefault(require("mongoose"));

var _debug2 = _interopRequireDefault(require("debug"));

var _serve = _interopRequireDefault(require("./serve"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const web3 = new _web.default('ws://127.0.0.1:8545');
const debug = (0, _debug2.default)('caterpillarql:app');
_mongoose.default.Promise = global.Promise;

_mongoose.default.connect('mongodb://localhost:27017/caterpillarRepo5').then(() => {
  debug('Conectado a MongoDB');
  (0, _serve.default)(web3);
}).catch(ex => {
  debug('Mongo db connection fail', ex);
  global.process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2FwcC9hcHAudHMiXSwibmFtZXMiOlsid2ViMyIsIldlYjMiLCJkZWJ1ZyIsIm1vbmdvb3NlIiwiUHJvbWlzZSIsImdsb2JhbCIsImNvbm5lY3QiLCJ0aGVuIiwiY2F0Y2giLCJleCIsInByb2Nlc3MiLCJleGl0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsSUFBSSxHQUFHLElBQUlDLFlBQUosQ0FBUyxxQkFBVCxDQUFiO0FBRUEsTUFBTUMsS0FBSyxHQUFHLHFCQUFPLG1CQUFQLENBQWQ7QUFHQUMsa0JBQVNDLE9BQVQsR0FBbUJDLE1BQU0sQ0FBQ0QsT0FBMUI7O0FBRUFELGtCQUFTRyxPQUFULENBQWlCLDRDQUFqQixFQUNHQyxJQURILENBRUksTUFBTTtBQUNKTCxFQUFBQSxLQUFLLENBQUMscUJBQUQsQ0FBTDtBQUNBLHNCQUFNRixJQUFOO0FBQ0QsQ0FMTCxFQU9HUSxLQVBILENBUUtDLEVBQUQsSUFBUTtBQUNOUCxFQUFBQSxLQUFLLENBQUMsMEJBQUQsRUFBNkJPLEVBQTdCLENBQUw7QUFDQUosRUFBQUEsTUFBTSxDQUFDSyxPQUFQLENBQWVDLElBQWYsQ0FBb0IsQ0FBcEI7QUFDRCxDQVhMIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYjMgZnJvbSAnd2ViMydcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcbmltcG9ydCBfZGVidWcgZnJvbSAnZGVidWcnXG5pbXBvcnQgc2VydmUgZnJvbSAnLi9zZXJ2ZSdcblxuY29uc3Qgd2ViMyA9IG5ldyBXZWIzKCd3czovLzEyNy4wLjAuMTo4NTQ1Jyk7XG5cbmNvbnN0IGRlYnVnID0gX2RlYnVnKCdjYXRlcnBpbGxhcnFsOmFwcCcpXG5cblxubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG5tb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NhdGVycGlsbGFyUmVwbzUnKVxuICAudGhlbihcbiAgICAoKSA9PiB7XG4gICAgICBkZWJ1ZygnQ29uZWN0YWRvIGEgTW9uZ29EQicpXG4gICAgICBzZXJ2ZSh3ZWIzKVxuICAgIH1cbiAgKVxuICAuY2F0Y2goXG4gICAgKGV4KSA9PiB7XG4gICAgICBkZWJ1ZygnTW9uZ28gZGIgY29ubmVjdGlvbiBmYWlsJywgZXgpXG4gICAgICBnbG9iYWwucHJvY2Vzcy5leGl0KDEpXG4gICAgfSBcbiAgKVxuIl19